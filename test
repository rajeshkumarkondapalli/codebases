Device Mount Process

During the device mount process, the status transitions from NONE to CONNECTING, and finally to CONNECTED. If the status changes from CONNECTING back to NONE, the device is considered disconnected.

Devices that become disconnected from the ODL pods should be retried or remounted multiple times before marking the status as disconnected in the inventory. ODL Pods send a Kafka notification to the Device Manager (DM) when a device changes its status from CONNECTING to NONE. The DM is responsible for managing such devices by retrying and remounting them a few times before sending the final device status to the Northbound interface (NB).

Handling Disconnected Devices (Connecting to None)

Mark the device for retry attempts.
Store the device details in the database.
Retry or remount the device, overriding if an entry already exists.
Batch the retry/remount job, selecting entries from the DeviceInventoryRetryCandidate.
Perform the mountDevice action.
Once synchronization and asynchronous processes are completed, mark the processedFlag.


Mount Status Data Query

Update the job-id for all documents that satisfy the following criteria:

The document type must be REQUEST_TYPE_MOUNT.
The device status must not be CONNECTED.
Next, check the mount status for both the pod and peer pod:

If both are in a CONNECTED state:

Update the device candidate.
Move the candidate entry to the device list.
Update the mount status data.
Send the updated status to the Northbound (NB) system.
If either is not CONNECTED:

Unmount both the pod and peer pod.
Remove the device candidate.
Update the mount status data.
Send the updated status to the Northbound (NB) system.
