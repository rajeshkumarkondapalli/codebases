for pod in $(kubectl get pods --no-headers -o custom-columns=":metadata.name" | grep 'java-app'); do
    echo "Checking thread count in $pod"
    kubectl exec -it "$pod" -- sh -c "jcmd \$(jps | awk '{print \$1}') Thread.count"
done